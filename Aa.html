<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Skillzoy Academy - Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- YouTube IFrame API Script -->
<script src="https://www.youtube.com/iframe_api"></script>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 pb-32 text-gray-800 font-['Cairo']">

<!-- Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù…Ø¤Ù‚Øª -->
<div id="certificateToast" class="fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-gradient-to-l from-green-500 to-emerald-600 text-white p-4 rounded-xl shadow-2xl z-50 flex items-center justify-between animate-slideInDown">
    <div class="flex items-center gap-3">
        <svg class="w-6 h-6 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
        <p class="text-sm font-medium">ØªÙˆØ§ØµÙ„ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯ØªÙƒ Ø¨Ø¹Ø¯ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯ÙˆØ±Ø©</p>
    </div>
    <button onclick="closeToast()" class="text-white hover:text-gray-200 transition flex-shrink-0">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
        </svg>
    </button>
</div>

<header class="bg-gradient-to-l from-indigo-700 to-blue-700 text-white p-6 shadow">
    <h1 class="text-2xl font-bold text-center">Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ | Skillzoy academy</h1>
</header>

<main class="max-w-7xl mx-auto p-4">
    <section id="homeSection" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"></section>
    <section id="myCoursesSection" class="hidden">
        <h2 class="text-xl font-bold mb-6">ğŸ“ Ø¯ÙˆØ±Ø§ØªÙŠ</h2>
        <div id="myCoursesList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>
    <section id="playerSection" class="hidden">
        <button onclick="backToMyCourses()" class="mb-4 text-indigo-600 font-semibold hover:underline transition">â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø¯ÙˆØ±Ø§ØªÙŠ</button>
        <h2 id="playerTitle" class="text-xl font-bold mb-4"></h2>
        <!-- Ø­Ø§ÙˆÙŠØ© Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨ -->
        <div id="playerContainer" class="w-full h-[420px] rounded-xl shadow bg-black"></div>
        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white p-4 rounded-lg shadow">
                <p class="text-gray-600 text-sm">Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</p>
                <p id="realProgressText" class="text-2xl font-bold text-green-600">0%</p>
                <div class="h-2 bg-gray-200 rounded-full mt-2">
                    <div id="realProgressBar" class="h-full bg-green-500 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
            <div class="bg-white p-4 rounded-lg shadow">
                <p class="text-gray-600 text-sm">Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø­Ø§Ù„ÙŠ</p>
                <p id="currentVideoText" class="text-2xl font-bold text-blue-600">1</p>
                <p class="text-gray-500 text-xs mt-1">Ù…Ù† <span id="totalVideosText">0</span> ÙÙŠØ¯ÙŠÙˆ</p>
            </div>
            <div class="bg-white p-4 rounded-lg shadow">
                <p class="text-gray-600 text-sm">ØªÙ… Ø­ÙØ¸ Ù…ÙˆÙ‚Ø¹Ùƒ</p>
                <p class="text-lg font-semibold text-purple-600">âœ…</p>
                <p class="text-gray-500 text-xs mt-1">Ø³ØªÙˆØ§ØµÙ„ Ù…Ù† Ø­ÙŠØ« ØªÙˆÙ‚ÙØª</p>
            </div>
        </div>
    </section>
</main>

<!-- Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø«Ø§Ø¨Øª -->
<a href="https://wa.me/0908280115" target="_blank" class="fixed left-5 bottom-5 bg-green-600 text-white w-14 h-14 flex items-center justify-center rounded-full shadow-lg hover:scale-110 transition z-50">
    <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24"><path d="M17.507 14.307l-.009.075c-.405 1.244-2.115 2.243-2.766 2.243-1.604 0-3.119-1.457-4.312-2.693-1.95-1.976-3.233-5.022-3.233-6.709 0-1.704 1.505-2.245 2.098-2.245h.434c.405 0 .74.31.855.714.115.404.403 1.402.434 1.505.087.344.161.736.022 1.099-.139.363-.232.527-.434.789-.202.262-.3.404-.434.628-.115.225-.231.483-.115.788.115.305.481 1.305.934 2.115.575 1.007 1.224 1.858 2.033 2.393.694.454 1.393.787 2.212.981.363.087.797.061 1.076-.087.279-.148.694-.433 1.066-.788.363-.363.81-.844 1.129-1.161.278-.28.625-.417.981-.405.356.011 1.161.231 1.705.526.544.295.923.472 1.05.73s.087.625-.023.894zM12 22c-5.523 0-10-4.477-10-10S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-18c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8z"/></svg>
</a>

<nav class="fixed bottom-0 left-0 right-0 bg-white border-t shadow flex justify-around py-3">
    <button onclick="showHome()" class="font-semibold text-indigo-700">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button onclick="showMyCourses()" class="text-gray-500">ğŸ“ Ø¯ÙˆØ±Ø§ØªÙŠ</button>
</nav>

<script>
/* === Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© === */
const courses = [
    {
        id: "react",
        title: "React.js",
        desc: "ØªØ·ÙˆÙŠØ± ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
        playlistId: "PLYyqC4bNbCIdSZ-JayMLl4WO2Cr995vyS",
        videoCount: 25 // Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† API Ù„Ø§Ø­Ù‚Ø§Ù‹
    },
    {
        id: "excel",
        title: "Excel Ø§Ù„Ù…ØªÙ‚Ø¯Ù…",
        desc: "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
        playlistId: "PLVn5UigDlJB8ZU35J4RyyEwfjJ9RH7-MK",
        videoCount: 18
    },
    {
        id: "ai",
        title: "AI Ø§Ù„Ù…ØªÙ‚Ø¯Ù…",
        desc: "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
        playlistId: "PLSLMEu6gRp1Zw-4GFG0dFLFX5q48ZYe_T",
        videoCount: 32
    }
];

/* === Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ === */
let myCourses = JSON.parse(localStorage.getItem("myCourses")) || [];
// ØªØ®Ø²ÙŠÙ† Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ: { courseId: { watchedVideos: [true,false,...], lastVideoIndex: 0, lastTime: 0, totalVideos: 20 } }
let courseProgress = JSON.parse(localStorage.getItem("courseProgress")) || {};
let player = null; // ÙƒØ§Ø¦Ù† Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨
let currentCourse = null; // Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

/* === YouTube IFrame API === */
// 1. Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ØªØ³ØªØ¯Ø¹Ù‰ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ù‚Ø¨Ù„ Ù…ÙƒØªØ¨Ø© ÙŠÙˆØªÙŠÙˆØ¨[citation:2]
function onYouTubeIframeAPIReady() {
    console.log("YouTube IFrame API Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…");
    // Ù„Ø§ Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´ØºÙ„ Ù‡Ù†Ø§ØŒ Ø¨Ù„ Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙØªØ­ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¯ÙˆØ±Ø© Ù…Ø¹ÙŠÙ†Ø©
}

// 2. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´ØºÙ„ Ù„Ù‚Ø§Ø¦Ù…Ø© ØªØ´ØºÙŠÙ„ Ù…Ø¹ÙŠÙ†Ø©
function createPlayerForCourse(course) {
    if (player) {
        player.destroy(); // ØªØ¯Ù…ÙŠØ± Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ù† ÙˆØ¬Ø¯
    }
    
    const progress = courseProgress[course.id] || { lastVideoIndex: 0, lastTime: 0 };
    
    player = new YT.Player('playerContainer', {
        height: '420',
        width: '100%',
        playerVars: {
            'listType': 'playlist',
            'list': course.playlistId,
            'index': progress.lastVideoIndex || 0, // ØªØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø£Ø®ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯
            'enablejsapi': 1, // ğŸ”¥ Ø¶Ø±ÙˆØ±ÙŠ Ù„Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„ØªØªØ¨Ø¹[citation:1]
            'modestbranding': 1,
            'rel': 0
        },
        events: {
            'onReady': function(event) {
                console.log("Ø§Ù„Ù…Ø´ØºÙ„ Ø¬Ø§Ù‡Ø²");
                // Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙˆÙ‚Øª Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚
                if (progress.lastTime > 0) {
                    setTimeout(() => event.target.seekTo(progress.lastTime), 500);
                }
                updateProgressUI();
                startProgressTracker();
            },
            'onStateChange': function(event) {
                // Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ (state = 0) Ø³Ø¬Ù„ ÙƒÙ…ÙƒØªÙ…Ù„[citation:5]
                if (event.data === YT.PlayerState.ENDED) {
                    markVideoAsWatched();
                }
            }
        }
    });
}

// 3. ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªÙ‚Ø¯Ù…
function updateProgressUI() {
    if (!currentCourse) return;
    const progress = courseProgress[currentCourse.id];
    if (!progress || !progress.watchedVideos) return;
    
    const watchedCount = progress.watchedVideos.filter(v => v).length;
    const total = progress.totalVideos || currentCourse.videoCount;
    const percentage = total > 0 ? Math.round((watchedCount / total) * 100) : 0;
    
    document.getElementById('realProgressText').textContent = percentage + '%';
    document.getElementById('realProgressBar').style.width = percentage + '%';
    document.getElementById('totalVideosText').textContent = total;
    
    // ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø­Ø§Ù„ÙŠ
    if (player && player.getPlaylistIndex) {
        const currentIdx = player.getPlaylistIndex();
        document.getElementById('currentVideoText').textContent = (currentIdx + 1);
    }
}

// 4. ØªØªØ¨Ø¹ Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆØ­ÙØ¸Ù‡
function startProgressTracker() {
    // Ø­ÙØ¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙƒÙ„ 5 Ø«ÙˆØ§Ù†Ù
    setInterval(() => {
        if (player && currentCourse && player.getCurrentTime && player.getPlaylistIndex) {
            const progress = courseProgress[currentCourse.id] || {};
            progress.lastVideoIndex = player.getPlaylistIndex();
            progress.lastTime = player.getCurrentTime();
            progress.totalVideos = player.getPlaylist()?.length || currentCourse.videoCount;
            
            courseProgress[currentCourse.id] = progress;
            localStorage.setItem("courseProgress", JSON.stringify(courseProgress));
        }
    }, 5000); // ÙƒÙ„ 5 Ø«ÙˆØ§Ù†Ù
}

// 5. ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙƒÙ…Ø´Ø§Ù‡Ø¯
function markVideoAsWatched() {
    if (!currentCourse || !player) return;
    
    let progress = courseProgress[currentCourse.id];
    if (!progress) progress = { watchedVideos: [] };
    if (!progress.watchedVideos) progress.watchedVideos = [];
    
    const currentIdx = player.getPlaylistIndex();
    if (currentIdx >= 0 && !progress.watchedVideos[currentIdx]) {
        progress.watchedVideos[currentIdx] = true;
        courseProgress[currentCourse.id] = progress;
        localStorage.setItem("courseProgress", JSON.stringify(courseProgress));
        updateProgressUI();
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶ ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ¯ÙˆØ±Ø§ØªÙŠ
        renderHome();
        renderMyCourses();
    }
}

/* === Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª === */
function renderHome() {
    const homeSection = document.getElementById('homeSection');
    homeSection.innerHTML = '';
    
    courses.forEach(c => {
        const enrolled = myCourses.includes(c.id);
        const progress = courseProgress[c.id];
        const watchedCount = progress?.watchedVideos?.filter(v => v).length || 0;
        const total = progress?.totalVideos || c.videoCount;
        const percentage = total > 0 ? Math.round((watchedCount / total) * 100) : 0;
        
        homeSection.innerHTML += `
            <div class="bg-white rounded-2xl shadow hover:shadow-xl transition overflow-hidden">
                <div class="h-52 bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                    <div class="text-white text-center">
                        <div class="text-4xl mb-2">${c.id === 'react' ? 'âš›ï¸' : c.id === 'excel' ? 'ğŸ“Š' : 'ğŸ¤–'}</div>
                        <p class="font-bold">${c.title}</p>
                    </div>
                </div>
                <div class="p-5">
                    <h3 class="font-bold text-lg mb-1">${c.title}</h3>
                    <p class="text-sm text-gray-600 mb-4">${c.desc}</p>
                    ${enrolled && progress ? `
                        <div class="mb-4">
                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</span>
                                <span>${percentage}%</span>
                            </div>
                            <div class="h-2 bg-gray-200 rounded-full">
                                <div class="h-full bg-green-500 rounded-full" style="width: ${percentage}%"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">${watchedCount} Ù…Ù† ${total} ÙÙŠØ¯ÙŠÙˆ</p>
                        </div>
                    ` : ''}
                    <button onclick="handleCourse('${c.id}')"
                        class="w-full py-3 rounded-xl font-semibold text-white transition
                        ${enrolled ? 'bg-green-600 hover:bg-green-700' : 'bg-blue-600 hover:bg-blue-700'}
                        active:scale-95">
                        ${enrolled ? 'ğŸš€ Ø§Ø¨Ø¯Ø£ / Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„ØªØ¹Ù„Ù…' : 'ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø©'}
                    </button>
                </div>
            </div>`;
    });
}

function handleCourse(id) {
    const course = courses.find(c => c.id === id);
    if (!course) return;
    
    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø¥Ù† Ù„Ù… ØªÙƒÙ† Ù…Ø³Ø¬Ù„Ø©
    if (!myCourses.includes(id)) {
        myCourses.push(id);
        localStorage.setItem("myCourses", JSON.stringify(myCourses));
        
        // ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‚Ø¯Ù…
        if (!courseProgress[id]) {
            courseProgress[id] = {
                watchedVideos: [],
                lastVideoIndex: 0,
                lastTime: 0,
                totalVideos: course.videoCount
            };
            localStorage.setItem("courseProgress", JSON.stringify(courseProgress));
        }
    }
    
    currentCourse = course;
    document.getElementById('playerTitle').textContent = course.title;
    
    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„Ù…Ø´ØºÙ„
    document.getElementById('homeSection').classList.add('hidden');
    document.getElementById('myCoursesSection').classList.add('hidden');
    document.getElementById('playerSection').classList.remove('hidden');
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨
    createPlayerForCourse(course);
}

function renderMyCourses() {
    const myCoursesList = document.getElementById('myCoursesList');
    if (myCourses.length === 0) {
        myCoursesList.innerHTML = '<p class="text-gray-500 col-span-3 text-center py-8">Ù„Ù… ØªØ³Ø¬Ù„ ÙÙŠ Ø£ÙŠ Ø¯ÙˆØ±Ø© Ø¨Ø¹Ø¯</p>';
        return;
    }
    
    myCoursesList.innerHTML = '';
    myCourses.forEach(courseId => {
        const course = courses.find(c => c.id === courseId);
        if (!course) return;
        
        const progress = courseProgress[courseId];
        const watchedCount = progress?.watchedVideos?.filter(v => v).length || 0;
        const total = progress?.totalVideos || course.videoCount;
        const percentage = total > 0 ? Math.round((watchedCount / total) * 100) : 0;
        
        myCoursesList.innerHTML += `
            <div class="bg-white rounded-xl shadow p-5">
                <h3 class="font-semibold mb-2">${course.title}</h3>
                <p class="text-sm text-gray-600 mb-4">${course.desc}</p>
                <div class="mb-4">
                    <div class="flex justify-between text-sm text-gray-600 mb-1">
                        <span>Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</span>
                        <span>${percentage}%</span>
                    </div>
                    <div class="h-2 bg-gray-200 rounded-full">
                        <div class="h-full bg-green-500 rounded-full" style="width: ${percentage}%"></div>
                    </div>
                </div>
                <button onclick="handleCourse('${courseId}')"
                    class="w-full mb-3 bg-green-600 text-white py-2 rounded-xl hover:bg-green-700 transition">
                    ğŸš€ ${percentage > 0 ? 'Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„ØªØ¹Ù„Ù…' : 'Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ù„Ù…'}
                </button>
                <button onclick="removeCourse('${courseId}')"
                    class="w-full border border-red-400 text-red-600 py-2 rounded-xl hover:bg-red-50 transition">
                    âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                </button>
            </div>`;
    });
}

function removeCourse(id) {
    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù ØªÙ‚Ø¯Ù…Ùƒ Ø£ÙŠØ¶Ø§Ù‹.')) {
        myCourses = myCourses.filter(cId => cId !== id);
        localStorage.setItem("myCourses", JSON.stringify(myCourses));
        
        delete courseProgress[id];
        localStorage.setItem("courseProgress", JSON.stringify(courseProgress));
        
        renderHome();
        renderMyCourses();
    }
}

/* === Ø§Ù„ØªÙ†Ù‚Ù„ === */
function backToMyCourses() {
    if (player) {
        player.destroy();
        player = null;
    }
    currentCourse = null;
    document.getElementById('playerSection').classList.add('hidden');
    showMyCourses();
}

function showHome() {
    document.getElementById('homeSection').classList.remove('hidden');
    document.getElementById('myCoursesSection').classList.add('hidden');
    document.getElementById('playerSection').classList.add('hidden');
    renderHome();
}

function showMyCourses() {
    document.getElementById('homeSection').classList.add('hidden');
    document.getElementById('myCoursesSection').classList.remove('hidden');
    document.getElementById('playerSection').classList.add('hidden');
    renderMyCourses();
}

/* === Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª === */
function closeToast() {
    const toast = document.getElementById('certificateToast');
    toast.style.opacity = '0';
    toast.style.transform = 'translateY(-20px)';
    toast.style.transition = 'all 0.3s ease';
    setTimeout(() => toast.style.display = 'none', 300);
}

// Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†Ù
setTimeout(closeToast, 5000);

/* === Ø§Ù„ØªÙ‡ÙŠØ¦Ø© === */
document.addEventListener('DOMContentLoaded', function() {
    renderHome();
    renderMyCourses();
});

/* === Ø£Ø³Ù„ÙˆØ¨ CSS Ù„Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© === */
const style = document.createElement('style');
style.textContent = `
    @keyframes slideInDown {
        from {
            transform: translateY(-100%);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
    .animate-slideInDown {
        animation: slideInDown 0.5s ease-out;
    }
`;
document.head.appendChild(style);

/* === Ø§Ù„Ø£Ù…Ø§Ù† (Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ) === */
(() => {
    document.addEventListener("keydown", (e) => {
        if ((e.ctrlKey && e.shiftKey && ["I", "C", "J", "L"].includes(e.key.toUpperCase())) || (e.key === "F12") || (e.ctrlKey && e.key.toUpperCase() === "U")) {
            e.preventDefault();
        }
    });
    document.addEventListener("copy", e => e.preventDefault());
    document.addEventListener("cut", e => e.preventDefault());
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("selectstart", e => e.preventDefault());
})();
</script>
</body>
</html>
